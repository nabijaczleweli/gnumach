#DPATCHLEVEL=0

2006-01-11  Alfred M. Szmidt  <ams@gnu.org>

	* Makefile.in (migs_d_SCRIPT): New variable.
	(%.migs_d): Use it.
	(migu_d_SCRIPT): New variable.
	%.migu_d): Use it.

--- Makefile.in	2005-07-25 06:48:20.000000000 +0300
+++ Makefile.in	2006-01-11 23:52:38.000000000 +0200
@@ -467,13 +467,17 @@
 
 # Here is how to make those dependency files
 
+migs_d_SCRIPT = 'set -e; $(CPP) $(MIGFLAGS) -M -MG -x c $< | \
+	sed -e \'s/[^:]*:/$(@:.migs_d=_server.c) $@:/\' > $@)'
+
 %.migs_d: %.srv $(before-compile)
-	(set -e; $(CPP) $(MIGFLAGS) -M -MG -x c $< | \
-	sed -e 's/[^:]*:/$(@:.migs_d=_server.c) $@:/' > $@)
+	$(migs_d_SCRIPT)
+
+migu_d_SCRIPT = 'set -e; $(CPP) $(MIGFLAGS) -M -MG -x c $< | \
+	sed -e \'s/[^:]*:/$(@:.migu_d=_user.c) $@:/\' > $@)'
 
 %.migu_d: %.cli $(before-compile)
-	(set -e; $(CPP) $(MIGFLAGS) -M -MG -x c $< | \
-	sed -e 's/[^:]*:/$(@:.migu_d=_user.c) $@:/' > $@)
+	$(migu_d_SCRIPT)
 
 %.migsh_d: %.migs_d
 	sed -e 's/_server\.c /_interface.h /' -e 's/migs_d/migsh_d/' < $< > $@

