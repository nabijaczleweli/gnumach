#DPATCHLEVEL=1

2004-09-19  Guillem Jover  <guillem@hadrons.org>

	* Makefile.in: Honour DESTDIR on installation targets.


diff -Naur gnumach-20040915.orig/Makefile.in gnumach-20040915/Makefile.in
--- gnumach-20040915.orig/Makefile.in	2004-09-19 05:35:01.000000000 +0200
+++ gnumach-20040915/Makefile.in	2004-09-19 05:31:17.000000000 +0200
@@ -334,23 +334,25 @@
 install: install-headers install-kernel
 
 $(installed-headers-names): $(includedir)/%: $(srcdir)/include/%
-	$(INSTALL_DATA) $< $@
+	$(INSTALL_DATA) $< $(DESTDIR)$@
 
 $(installed-sysdep-headers-names): $(includedir)/%: $(sysdep)/include/%
-	$(INSTALL_DATA) $< $@
+	$(INSTALL_DATA) $< $(DESTDIR)$@
 
 install-headers: mkheaderdirs $(installed-headers-names) $(installed-sysdep-headers-names)
-	ln -sf $(systype) $(includedir)/mach/machine
+	ln -sf $(systype) $(DESTDIR)$(includedir)/mach/machine
 
 install-kernel: kernel mkkerneldirs
-	$(INSTALL_PROGRAM) kernel $(bootdir)/gnumach
+	$(INSTALL_PROGRAM) kernel $(DESTDIR)$(bootdir)/gnumach
 
 mkheaderdirs:
-	mkdir -p $(includedir) $(includedir)/device $(includedir)/mach \
-		$(includedir)/mach/$(systype) $(includedir)/mach/exec
+	mkdir -p $(DESTDIR)$(includedir) $(DESTDIR)$(includedir)/device \
+		$(DESTDIR)$(includedir)/mach \
+		$(DESTDIR)$(includedir)/mach/$(systype) \
+		$(DESTDIR)$(includedir)/mach/exec
 
 mkkerneldirs:
-	mkdir -p $(bootdir)
+	mkdir -p $(DESTDIR)$(bootdir)
 
 
 #
