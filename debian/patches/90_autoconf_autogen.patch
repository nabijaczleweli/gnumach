#DPATCHLEVEL=1

This patch is just autogenerated stuff, do not hack directly on it.
Regenerate with:

	autoreconf -fis
	find -name autom4te.cache | xargs rm -rf


diff -Naur gnumach-20050801.orig/i386/linux/configure gnumach-20050801/i386/linux/configure
--- gnumach-20050801.orig/i386/linux/configure	2005-07-25 06:48:31.000000000 +0300
+++ gnumach-20050801/i386/linux/configure	2005-08-01 04:04:31.000000000 +0300
@@ -853,6 +853,7 @@
   --enable-epic100        enable driver alias epic100 for epic
   --enable-floppy         enable driver floppy
   --enable-ide            enable driver ide
+  --enable-ide-forcedma   enable forced use of DMA on IDE
   --enable-advansys       enable driver alias advansys for advansys
   --enable-advansys       enable driver advansys
   --enable-BusLogic       enable driver alias BusLogic for buslogic
@@ -910,6 +911,22 @@
   --enable-gdth           enable driver alias gdth for gdth
   --enable-gdth           enable driver gdth
   --enable-flashpoint     enable SCSI flashpoint [default=no]
+  --enable-starfire       enable driver alias starfire for starfire
+  --enable-starfire       enable driver starfire
+  --enable-sundance       enable driver alias sundance for sundance
+  --enable-sundance       enable driver sundance
+  --enable-winbond-840    enable driver alias winbond-840 for winbond_840
+  --enable-winbond_840    enable driver winbond_840
+  --enable-hamachi        enable driver alias hamachi for hamachi
+  --enable-hamachi        enable driver hamachi
+  --enable-intel-gige     enable driver alias intel-gige for intel_gige
+  --enable-intel_gige     enable driver intel_gige
+  --enable-natsemi        enable driver alias natsemi for natsemi
+  --enable-natsemi        enable driver natsemi
+  --enable-myson803       enable driver alias myson803 for myson803
+  --enable-myson803       enable driver myson803
+  --enable-ns820          enable driver alias ns820 for ns820
+  --enable-ns820          enable driver ns820
   --enable-ne2000         enable driver ne2000
   --enable-el2            enable driver el2
   --enable-el3            enable driver el3
@@ -954,6 +971,8 @@
   --enable-de600          enable driver de600
   --enable-de620          enable driver alias de620 for de620
   --enable-de620          enable driver de620
+  --enable-sis900         enable driver alias sis900 for sis900
+  --enable-sis900         enable driver sis900
   --enable-sk_g16         enable driver alias sk_g16 for skg16
   --enable-skg16          enable driver skg16
   --enable-ni52           enable driver alias ni52 for ni52
@@ -3085,7 +3104,7 @@
 
 driver_class_net_option=CONFIG_INET
 driver_class_net_files=" \
-  auto_irq.o net.o Space.o dev.o net_init.o"
+  auto_irq.o net.o Space.o dev.o net_init.o pci-scan.o"
 
 
 
@@ -3142,6 +3161,17 @@
 
 fi;
 
+# Check whether --enable-ide-forcedma or --disable-ide-forcedma was given.
+if test "${enable_ide_forcedma+set}" = set; then
+  enableval="$enable_ide_forcedma"
+  test x"$enableval" = xno ||
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_BLK_DEV_FORCE_DMA 1
+_ACEOF
+
+fi;
+
 
 
 
@@ -4111,6 +4141,280 @@
 
 
 
+
+
+# Checking for alias starfire
+# Check whether --enable-starfire or --disable-starfire was given.
+if test "${enable_starfire+set}" = set; then
+  enableval="$enable_starfire"
+  enable_starfire="$enable_starfire"
+
+fi;
+
+# Checking for device driver option starfire
+# Check whether --enable-starfire or --disable-starfire was given.
+if test "${enable_starfire+set}" = set; then
+  enableval="$enable_starfire"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_STARFIRE 1
+_ACEOF
+
+device_drivers="$device_drivers starfire.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
+# Checking for alias sundance
+# Check whether --enable-sundance or --disable-sundance was given.
+if test "${enable_sundance+set}" = set; then
+  enableval="$enable_sundance"
+  enable_sundance="$enable_sundance"
+
+fi;
+
+# Checking for device driver option sundance
+# Check whether --enable-sundance or --disable-sundance was given.
+if test "${enable_sundance+set}" = set; then
+  enableval="$enable_sundance"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_SUNDANCE 1
+_ACEOF
+
+device_drivers="$device_drivers sundance.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
+# Checking for alias winbond-840
+# Check whether --enable-winbond-840 or --disable-winbond-840 was given.
+if test "${enable_winbond_840+set}" = set; then
+  enableval="$enable_winbond_840"
+  enable_winbond_840="$enable_winbond-840"
+
+fi;
+
+# Checking for device driver option winbond_840
+# Check whether --enable-winbond_840 or --disable-winbond_840 was given.
+if test "${enable_winbond_840+set}" = set; then
+  enableval="$enable_winbond_840"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_WINBOND840 1
+_ACEOF
+
+device_drivers="$device_drivers winbond-840.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
+# Checking for alias hamachi
+# Check whether --enable-hamachi or --disable-hamachi was given.
+if test "${enable_hamachi+set}" = set; then
+  enableval="$enable_hamachi"
+  enable_hamachi="$enable_hamachi"
+
+fi;
+
+# Checking for device driver option hamachi
+# Check whether --enable-hamachi or --disable-hamachi was given.
+if test "${enable_hamachi+set}" = set; then
+  enableval="$enable_hamachi"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_HAMACHI 1
+_ACEOF
+
+device_drivers="$device_drivers hamachi.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
+# Checking for alias intel-gige
+# Check whether --enable-intel-gige or --disable-intel-gige was given.
+if test "${enable_intel_gige+set}" = set; then
+  enableval="$enable_intel_gige"
+  enable_intel_gige="$enable_intel-gige"
+
+fi;
+
+# Checking for device driver option intel_gige
+# Check whether --enable-intel_gige or --disable-intel_gige was given.
+if test "${enable_intel_gige+set}" = set; then
+  enableval="$enable_intel_gige"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_INTEL_GIGE 1
+_ACEOF
+
+device_drivers="$device_drivers intel-gige.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
+# Checking for alias natsemi
+# Check whether --enable-natsemi or --disable-natsemi was given.
+if test "${enable_natsemi+set}" = set; then
+  enableval="$enable_natsemi"
+  enable_natsemi="$enable_natsemi"
+
+fi;
+
+# Checking for device driver option natsemi
+# Check whether --enable-natsemi or --disable-natsemi was given.
+if test "${enable_natsemi+set}" = set; then
+  enableval="$enable_natsemi"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_NATSEMI 1
+_ACEOF
+
+device_drivers="$device_drivers natsemi.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
+# Checking for alias myson803
+# Check whether --enable-myson803 or --disable-myson803 was given.
+if test "${enable_myson803+set}" = set; then
+  enableval="$enable_myson803"
+  enable_myson803="$enable_myson803"
+
+fi;
+
+# Checking for device driver option myson803
+# Check whether --enable-myson803 or --disable-myson803 was given.
+if test "${enable_myson803+set}" = set; then
+  enableval="$enable_myson803"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_MYSON803 1
+_ACEOF
+
+device_drivers="$device_drivers myson803.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
+# Checking for alias ns820
+# Check whether --enable-ns820 or --disable-ns820 was given.
+if test "${enable_ns820+set}" = set; then
+  enableval="$enable_ns820"
+  enable_ns820="$enable_ns820"
+
+fi;
+
+# Checking for device driver option ns820
+# Check whether --enable-ns820 or --disable-ns820 was given.
+if test "${enable_ns820+set}" = set; then
+  enableval="$enable_ns820"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_NS820 1
+_ACEOF
+
+device_drivers="$device_drivers ns820.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
 # Checking for device driver option ne2000
 # Check whether --enable-ne2000 or --disable-ne2000 was given.
 if test "${enable_ne2000+set}" = set; then
@@ -5008,6 +5312,40 @@
 
 
 
+# Checking for alias sis900
+# Check whether --enable-sis900 or --disable-sis900 was given.
+if test "${enable_sis900+set}" = set; then
+  enableval="$enable_sis900"
+  enable_sis900="$enable_sis900"
+
+fi;
+
+# Checking for device driver option sis900
+# Check whether --enable-sis900 or --disable-sis900 was given.
+if test "${enable_sis900+set}" = set; then
+  enableval="$enable_sis900"
+
+if test "x$enableval" != xno; then
+
+cat >>confdefs.h <<\_ACEOF
+#define CONFIG_SIS900 1
+_ACEOF
+
+device_drivers="$device_drivers sis900.o"
+if test "${driver_class_net_selected+set}" != set; then
+  driver_class_net_selected=yes
+  cat >>confdefs.h <<_ACEOF
+#define $driver_class_net_option 1
+_ACEOF
+
+  device_drivers="$device_drivers $driver_class_net_files"
+fi
+fi
+
+fi;
+
+
+
 # Checking for alias sk_g16
 # Check whether --enable-sk_g16 or --disable-sk_g16 was given.
 if test "${enable_sk_g16+set}" = set; then
diff -Naur gnumach-20050801.orig/i386/linux/device-drivers.h.in gnumach-20050801/i386/linux/device-drivers.h.in
--- gnumach-20050801.orig/i386/linux/device-drivers.h.in	2005-07-25 06:48:31.000000000 +0300
+++ gnumach-20050801/i386/linux/device-drivers.h.in	2005-08-01 04:04:33.000000000 +0300
@@ -18,6 +18,9 @@
 /* floppy */
 #undef CONFIG_BLK_DEV_FD
 
+/* Force DMA on IDE block devices */
+#undef CONFIG_BLK_DEV_FORCE_DMA
+
 /* ide */
 #undef CONFIG_BLK_DEV_IDE
 
@@ -75,6 +78,9 @@
 /* fmv18x */
 #undef CONFIG_FMV18X
 
+/* hamachi */
+#undef CONFIG_HAMACHI
+
 /* hp100 */
 #undef CONFIG_HP100
 
@@ -87,6 +93,9 @@
 /* Driver Class net */
 #undef CONFIG_INET
 
+/* intel_gige */
+#undef CONFIG_INTEL_GIGE
+
 /* lance */
 #undef CONFIG_LANCE
 
@@ -102,6 +111,12 @@
 /* 686 */
 #undef CONFIG_M686
 
+/* myson803 */
+#undef CONFIG_MYSON803
+
+/* natsemi */
+#undef CONFIG_NATSEMI
+
 /* ne2000 */
 #undef CONFIG_NE2000
 
@@ -114,6 +129,9 @@
 /* ni65 */
 #undef CONFIG_NI65
 
+/* ns820 */
+#undef CONFIG_NS820
+
 /* pcnet32 */
 #undef CONFIG_PCNET32
 
@@ -213,9 +231,18 @@
 /* seeq8005 */
 #undef CONFIG_SEEQ8005
 
+/* sis900 */
+#undef CONFIG_SIS900
+
 /* skg16 */
 #undef CONFIG_SK_G16
 
+/* starfire */
+#undef CONFIG_STARFIRE
+
+/* sundance */
+#undef CONFIG_SUNDANCE
+
 /* tlan */
 #undef CONFIG_TLAN
 
@@ -237,6 +264,9 @@
 /* wd80x3 */
 #undef CONFIG_WD80x3
 
+/* winbond_840 */
+#undef CONFIG_WINBOND840
+
 /* yellowfin */
 #undef CONFIG_YELLOWFIN
 
diff -Naur gnumach-20050801.orig/i386/linux/device-drivers.h.in~ gnumach-20050801/i386/linux/device-drivers.h.in~
--- gnumach-20050801.orig/i386/linux/device-drivers.h.in~	1970-01-01 02:00:00.000000000 +0200
+++ gnumach-20050801/i386/linux/device-drivers.h.in~	2005-07-25 06:48:31.000000000 +0300
@@ -0,0 +1,262 @@
+/* device-drivers.h.in.  Generated from configure.ac by autoheader.  */
+
+/* 3c515 */
+#undef CONFIG_3C515
+
+/* ac3200 */
+#undef CONFIG_AC3200
+
+/* apricot */
+#undef CONFIG_APRICOT
+
+/* at1700 */
+#undef CONFIG_AT1700
+
+/* atp */
+#undef CONFIG_ATP
+
+/* floppy */
+#undef CONFIG_BLK_DEV_FD
+
+/* ide */
+#undef CONFIG_BLK_DEV_IDE
+
+/* de4x5 */
+#undef CONFIG_DE4X5
+
+/* de600 */
+#undef CONFIG_DE600
+
+/* de620 */
+#undef CONFIG_DE620
+
+/* elcp */
+#undef CONFIG_DEC_ELCP
+
+/* depca */
+#undef CONFIG_DEPCA
+
+/* e2100 */
+#undef CONFIG_E2100
+
+/* eexpress */
+#undef CONFIG_EEXPRESS
+
+/* eexpresspro */
+#undef CONFIG_EEXPRESS_PRO
+
+/* eexpresspro100 */
+#undef CONFIG_EEXPRESS_PRO100B
+
+/* el1 */
+#undef CONFIG_EL1
+
+/* el16 */
+#undef CONFIG_EL16
+
+/* el2 */
+#undef CONFIG_EL2
+
+/* el3 */
+#undef CONFIG_EL3
+
+/* elplus */
+#undef CONFIG_ELPLUS
+
+/* epic */
+#undef CONFIG_EPIC
+
+/* eth16i */
+#undef CONFIG_ETH16I
+
+/* ewrk3 */
+#undef CONFIG_EWRK3
+
+/* fmv18x */
+#undef CONFIG_FMV18X
+
+/* hp100 */
+#undef CONFIG_HP100
+
+/* hplan */
+#undef CONFIG_HPLAN
+
+/* hplanplus */
+#undef CONFIG_HPLAN_PLUS
+
+/* Driver Class net */
+#undef CONFIG_INET
+
+/* lance */
+#undef CONFIG_LANCE
+
+/* 386 */
+#undef CONFIG_M386
+
+/* 486 */
+#undef CONFIG_M486
+
+/* 586 */
+#undef CONFIG_M586
+
+/* 686 */
+#undef CONFIG_M686
+
+/* ne2000 */
+#undef CONFIG_NE2000
+
+/* ne2kpci */
+#undef CONFIG_NE2K_PCI
+
+/* ni52 */
+#undef CONFIG_NI52
+
+/* ni65 */
+#undef CONFIG_NI65
+
+/* pcnet32 */
+#undef CONFIG_PCNET32
+
+/* rtl8139 */
+#undef CONFIG_RTL8139
+
+/* Driver Class scsi */
+#undef CONFIG_SCSI
+
+/* wd7000 */
+#undef CONFIG_SCSI_7000FASST
+
+/* advansys */
+#undef CONFIG_SCSI_ADVANSYS
+
+/* aha152x */
+#undef CONFIG_SCSI_AHA152X
+
+/* aha1542 */
+#undef CONFIG_SCSI_AHA1542
+
+/* aha1740 */
+#undef CONFIG_SCSI_AHA1740
+
+/* aic7xxx */
+#undef CONFIG_SCSI_AIC7XXX
+
+/* am53c974 */
+#undef CONFIG_SCSI_AM53C974
+
+/* buslogic */
+#undef CONFIG_SCSI_BUSLOGIC
+
+/* dc390t */
+#undef CONFIG_SCSI_DC390T
+
+/* dtc3280 */
+#undef CONFIG_SCSI_DTC3280
+
+/* eata */
+#undef CONFIG_SCSI_EATA
+
+/* eatadma */
+#undef CONFIG_SCSI_EATA_DMA
+
+/* eatapio */
+#undef CONFIG_SCSI_EATA_PIO
+
+/* futuredomain */
+#undef CONFIG_SCSI_FUTURE_DOMAIN
+
+/* gdth */
+#undef CONFIG_SCSI_GDTH
+
+/* ncr5380 */
+#undef CONFIG_SCSI_GENERIC_NCR5380
+
+/* in2000 */
+#undef CONFIG_SCSI_IN2000
+
+/* ncr53c406a */
+#undef CONFIG_SCSI_NCR53C406A
+
+/* ncr53c7xx */
+#undef CONFIG_SCSI_NCR53C7xx
+
+/* ncr53c8xx */
+#undef CONFIG_SCSI_NCR53C8XX
+
+/* scsi omit flashpoint */
+#undef CONFIG_SCSI_OMIT_FLASHPOINT
+
+/* pas16 */
+#undef CONFIG_SCSI_PASS16
+
+/* ppa */
+#undef CONFIG_SCSI_PPA
+
+/* qlogicfas */
+#undef CONFIG_SCSI_QLOGIC_FAS
+
+/* qlogicisp */
+#undef CONFIG_SCSI_QLOGIC_ISP
+
+/* seagate */
+#undef CONFIG_SCSI_SEAGATE
+
+/* t128 */
+#undef CONFIG_SCSI_T128
+
+/* u1434f */
+#undef CONFIG_SCSI_U14_34F
+
+/* ultrastor */
+#undef CONFIG_SCSI_ULTRASTOR
+
+/* seeq8005 */
+#undef CONFIG_SEEQ8005
+
+/* skg16 */
+#undef CONFIG_SK_G16
+
+/* tlan */
+#undef CONFIG_TLAN
+
+/* ul */
+#undef CONFIG_ULTRA
+
+/* ul32 */
+#undef CONFIG_ULTRA32
+
+/* viarhine */
+#undef CONFIG_VIA_RHINE
+
+/* vortex */
+#undef CONFIG_VORTEX
+
+/* wavelan */
+#undef CONFIG_WAVELAN
+
+/* wd80x3 */
+#undef CONFIG_WD80x3
+
+/* yellowfin */
+#undef CONFIG_YELLOWFIN
+
+/* znet */
+#undef CONFIG_ZNET
+
+/* CPU */
+#undef CPU
+
+/* Define to the address where bug reports for this package should be sent. */
+#undef PACKAGE_BUGREPORT
+
+/* Define to the full name of this package. */
+#undef PACKAGE_NAME
+
+/* Define to the full name and version of this package. */
+#undef PACKAGE_STRING
+
+/* Define to the one symbol short name of this package. */
+#undef PACKAGE_TARNAME
+
+/* Define to the version of this package. */
+#undef PACKAGE_VERSION
