commit dd0989ad8e7526844fcbc2e26bbcc4cc37a010ac
Author: Richard Braun <rbraun@sceen.net>
Date:   Thu Oct 10 20:21:17 2013 +0200

    Increase kernel map entry pool size
    
    * vm/vm_map.h (KENTRY_DATA_SIZE): Set to 256 pages.

diff --git a/vm/vm_map.h b/vm/vm_map.h
index 5fdac4e..1caf9ae 100644
--- a/vm/vm_map.h
+++ b/vm/vm_map.h
@@ -55,7 +55,7 @@
 #include <kern/macro_help.h>
 
 /* TODO: make it dynamic */
-#define KENTRY_DATA_SIZE (64*PAGE_SIZE)
+#define KENTRY_DATA_SIZE (256*PAGE_SIZE)
 
 /*
  *	Types defined:


Additionally reduce the slab size to 64MiB to make room for that.

diff --git a/kern/slab.c b/kern/slab.c
index 47c2c8f..4034579 100644
--- a/kern/slab.c
+++ b/kern/slab.c
@@ -165,7 +165,7 @@
 /*
  * Size of the VM submap from which default backend functions allocate.
  */
-#define KMEM_MAP_SIZE (128 * 1024 * 1024)
+#define KMEM_MAP_SIZE (64 * 1024 * 1024)
 
 /*
  * Shift for the first kalloc cache size.
